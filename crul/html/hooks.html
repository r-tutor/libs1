<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Event Hooks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for hooks {crul}"><tr><td>hooks {crul}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Event Hooks</h2>

<h3>Description</h3>

<p>Trigger functions to run on requests and/or responses.
See Details for more.
</p>


<h3>Details</h3>

<p>Functions passed to <code>request</code> are run <strong>before</strong> the
request occurs. The meaning of triggering a function on the
request is that you can do things to the request object.
</p>
<p>Functions passed to <code>response</code> are run <strong>once</strong> the
request is done, and the response object is created.
The meaning of triggering a function on the
response is to do things on the response object.
</p>
<p>The above for request and response applies the same
whether you make real HTTP requests or mock with
<code>webmockr</code>.
</p>


<h3>Note</h3>

<p>Only supported on <a href="HttpClient.html">HttpClient</a> for now
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# hooks on the request
fun_req &lt;- function(request) {
  cat(paste0("Requesting: ", request$url$url), sep = "\n")
}
(x &lt;- HttpClient$new(url = "https://httpbin.org",
  hooks = list(request = fun_req)))
x$hooks
x$hooks$request
r1 &lt;- x$get('get')

captured_req &lt;- list()
fun_req2 &lt;- function(request) {
  cat("Capturing Request", sep = "\n")
  captured_req &lt;&lt;- request
}
(x &lt;- HttpClient$new(url = "https://httpbin.org",
  hooks = list(request = fun_req2)))
x$hooks
x$hooks$request
r1 &lt;- x$get('get')
captured_req



# hooks on the response
fun_resp &lt;- function(response) {
  cat(paste0("status_code: ", response$status_code), sep = "\n")
}
(x &lt;- HttpClient$new(url = "https://httpbin.org",
  hooks = list(response = fun_resp)))
x$url
x$hooks
r1 &lt;- x$get('get')

# both
(x &lt;- HttpClient$new(url = "https://httpbin.org",
  hooks = list(request = fun_req, response = fun_resp)))
x$get("get")

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>crul</em> version 0.8.0 <a href="00Index.html">Index</a>]</div>
</body></html>
