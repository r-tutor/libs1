<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Sparse Matrix Class</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for spam {spam}"><tr><td>spam {spam}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Sparse Matrix Class</h2>

<h3>Description</h3>

<p>This group of functions evaluates and coerces changes in class structure.
</p>


<h3>Usage</h3>

<pre>
spam(x, nrow = 1, ncol = 1, eps = getOption("spam.eps"))


as.spam(x, eps = getOption("spam.eps"))


is.spam(x)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>is a matrix (of either dense or sparse form), a list, vector
object or a distance object</p>
</td></tr>
<tr valign="top"><td><code>nrow</code></td>
<td>
<p>number of rows of matrix </p>
</td></tr>
<tr valign="top"><td><code>ncol</code></td>
<td>
<p>number of columns of matrix </p>
</td></tr>
</table>



<table summary="R argblock">
<tr valign="top"><td><code>eps</code></td>
<td>
<p>A tolerance parameter:  elements of <code>x</code> such that
<code>abs(x) &lt; eps</code> set to zero. Defaults to <code>eps =
    getOption("spam.eps")</code> </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions <code>spam</code> and <code>as.spam</code> act like <code>matrix</code>
and <code>as.matrix</code> 
to coerce an object to a sparse matrix object of class <code>spam</code>.  
</p>
<p>If <code>x</code> is a list, it should contain either two or three elements.
In case of the former, the list should contain a <code>n</code> by two
matrix of indicies (called <code>ind</code>) and the values.
In case of the latter, the list should contain three vectors
containing the row, column indices (called <code>i</code> and
<code>j</code>) and the values. In both cases partial matching is done.
In case there are several triplets with the same <code>i</code>, <code>j</code>,
the values are added.
</p>
<p><code>eps</code> should be at least as large as <code>.Machine$double.eps</code>.
</p>
<p>If <code>getOption("spam.force64")</code> is <code>TRUE</code>, a 64-bit
spam matrix is returned in any case. If <code>FALSE</code>, a 32-bit
matrix is returned when possible. 
</p>


<h3>Value</h3>

<p>A valid <code>spam</code> object.<br />
<code>is.spam</code> returns <code>TRUE</code> if <code>x</code> is a <code>spam</code> object.</p>


<h3>Note</h3>

<p>The zero matrix has the element zero stored in (1,1).<br />
</p>
<p>The functions do not test the presence of <code>NA/NaN/Inf</code>. Virtually
all call a Fortran routine with the <code>NAOK=NAOK</code>
argument, which defaults to <code>FALSE</code> resulting in an error.
Hence, the <code>NaN</code> do not always properly propagate through (i.e.
<code>spam</code> is not IEEE-754 compliant).
</p>


<h3>Author(s)</h3>

<p>Reinhard Furrer</p>


<h3>References</h3>

<p>Reinhard Furrer, Stephan R. Sain (2010). 
&quot;spam: A Sparse Matrix R Package with Emphasis on MCMC
Methods for Gaussian Markov Random Fields.&quot;,
<em>Journal of Statistical Software</em>, 36(10), 1-25,
<a href="http://www.jstatsoft.org/v36/i10/.">http://www.jstatsoft.org/v36/i10/.</a>
</p>


<h3>See Also</h3>

<p><code><a href="spam-package.html">SPAM</a></code> for a general overview of the package;
<code><a href="spam-deprecated.html">spam.options</a></code> for details about the <code>safemode</code> flag;
<code><a href="import.html">read.MM</a></code> and <code><a href="foreign.html">foreign</a></code> to create <code>spam</code>
matrices from MatrixMarket
files and from certain <span class="pkg">Matrix</span> or <span class="pkg">SparseM</span> formats.
</p>


<h3>Examples</h3>

<pre>
# old message, do not loop, when you create a large sparse matrix
set.seed(13)
nz &lt;- 128
ln &lt;- nz^2
smat &lt;- spam(0,ln,ln)
is &lt;- sample(ln,nz)
js &lt;- sample(ln,nz)
system.time(for (i in 1:nz) smat[is[i], js[i]] &lt;- i)
system.time(smat[cbind(is,js)] &lt;- 1:nz)

getClass("spam")


options(spam.NAOK=TRUE)
as.spam(c(1, NA))
</pre>

<hr /><div style="text-align: center;">[Package <em>spam</em> version 2.2-1 <a href="00Index.html">Index</a>]</div>
</body></html>
