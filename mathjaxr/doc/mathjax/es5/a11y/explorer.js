!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=14)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sreReady=MathJax._.a11y.sre.sreReady},function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(void 0===n||n-->0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i["return"])&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractExplorer=void 0,__webpack_require__(0);var AbstractExplorer=function(){function AbstractExplorer(document,region,node){for(var _rest=[],_i=3;_i<arguments.length;_i++)_rest[_i-3]=arguments[_i];this.document=document,this.region=region,this.node=node,this.stoppable=!0,this.events=[],this.highlighter=this.getHighlighter(),this._active=!1}return AbstractExplorer.stopEvent=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1,event.stopImmediatePropagation?event.stopImmediatePropagation():event.stopPropagation&&event.stopPropagation(),event.cancelBubble=!0},AbstractExplorer.create=function(document,region,node){for(var rest=[],_i=3;_i<arguments.length;_i++)rest[_i-3]=arguments[_i];var explorer=new(this.bind.apply(this,__spread([void 0,document,region,node],rest)));return explorer},AbstractExplorer.prototype.Events=function(){return this.events},Object.defineProperty(AbstractExplorer.prototype,"active",{get:function(){return this._active},set:function(flag){this._active=flag},enumerable:!1,configurable:!0}),AbstractExplorer.prototype.Attach=function(){this.AddEvents()},AbstractExplorer.prototype.Detach=function(){this.RemoveEvents()},AbstractExplorer.prototype.Start=function(){this.highlighter=this.getHighlighter(),this.active=!0},AbstractExplorer.prototype.Stop=function(){this.active&&(this.region.Clear(),this.region.Hide(),this.active=!1)},AbstractExplorer.prototype.AddEvents=function(){var e_1,_a;try{for(var _b=__values(this.events),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),eventkind=_d[0],eventfunc=_d[1];this.node.addEventListener(eventkind,eventfunc)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},AbstractExplorer.prototype.RemoveEvents=function(){var e_2,_a;try{for(var _b=__values(this.events),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),eventkind=_d[0],eventfunc=_d[1];this.node.removeEventListener(eventkind,eventfunc)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_2)throw e_2.error}}},AbstractExplorer.prototype.Update=function(force){void 0===force&&(force=!1)},AbstractExplorer.prototype.getHighlighter=function(){var opts=this.document.options.a11y,foreground={color:opts.foregroundColor.toLowerCase(),alpha:opts.foregroundOpacity/100},background={color:opts.backgroundColor.toLowerCase(),alpha:opts.backgroundOpacity/100};return sre.HighlighterFactory.highlighter(background,foreground,{renderer:this.document.outputJax.name,browser:"v3"})},AbstractExplorer.prototype.stopEvent=function(event){this.stoppable&&AbstractExplorer.stopEvent(event)},AbstractExplorer}();exports.AbstractExplorer=AbstractExplorer},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),_a,_b,_c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.HoverRegion=exports.LiveRegion=exports.ToolTip=exports.StringRegion=exports.DummyRegion=exports.AbstractRegion=void 0;var StyleList_js_1=__webpack_require__(13);__webpack_require__(0);var AbstractRegion=function(){function AbstractRegion(document){this.document=document,this.CLASS=this.constructor,this.AddStyles(),this.AddElement()}return AbstractRegion.prototype.AddStyles=function(){if(!this.CLASS.styleAdded){var node=this.document.adaptor.node("style");node.innerHTML=this.CLASS.style.cssText,this.document.adaptor.head(this.document.adaptor.document).appendChild(node),this.CLASS.styleAdded=!0}},AbstractRegion.prototype.AddElement=function(){var element=this.document.adaptor.node("div");element.classList.add(this.CLASS.className),element.style.backgroundColor="white",this.div=element,this.inner=this.document.adaptor.node("div"),this.div.appendChild(this.inner),this.document.adaptor.body(this.document.adaptor.document).appendChild(this.div)},AbstractRegion.prototype.Show=function(node,highlighter){this.position(node),this.highlight(highlighter),this.div.classList.add(this.CLASS.className+"_Show")},AbstractRegion.prototype.Hide=function(){this.div.classList.remove(this.CLASS.className+"_Show")},AbstractRegion.prototype.stackRegions=function(node){for(var rect=node.getBoundingClientRect(),baseBottom=0,baseLeft=Number.POSITIVE_INFINITY,regions=this.document.adaptor.document.getElementsByClassName(this.CLASS.className+"_Show"),i=0,region=void 0;region=regions[i];i++)region!==this.div&&(baseBottom=Math.max(region.getBoundingClientRect().bottom,baseBottom),baseLeft=Math.min(region.getBoundingClientRect().left,baseLeft));var bot=(baseBottom?baseBottom:rect.bottom+10)+window.pageYOffset,left=(baseLeft<Number.POSITIVE_INFINITY?baseLeft:rect.left)+window.pageXOffset;this.div.style.top=bot+"px",this.div.style.left=left+"px"},AbstractRegion.styleAdded=!1,AbstractRegion}();exports.AbstractRegion=AbstractRegion;var DummyRegion=function(_super){function DummyRegion(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(DummyRegion,_super),DummyRegion.prototype.Clear=function(){},DummyRegion.prototype.Update=function(){},DummyRegion.prototype.Hide=function(){},DummyRegion.prototype.Show=function(){},DummyRegion.prototype.AddElement=function(){},DummyRegion.prototype.AddStyles=function(){},DummyRegion.prototype.position=function(){},DummyRegion.prototype.highlight=function(_highlighter){},DummyRegion}(AbstractRegion);exports.DummyRegion=DummyRegion;var StringRegion=function(_super){function StringRegion(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(StringRegion,_super),StringRegion.prototype.Clear=function(){this.Update(""),this.inner.style.top="",this.inner.style.backgroundColor=""},StringRegion.prototype.Update=function(speech){this.inner.textContent="",this.inner.textContent=speech},StringRegion.prototype.position=function(node){this.stackRegions(node)},StringRegion.prototype.highlight=function(highlighter){var color=highlighter.colorString();this.inner.style.backgroundColor=color.background,this.inner.style.color=color.foreground},StringRegion}(AbstractRegion);exports.StringRegion=StringRegion;var ToolTip=function(_super){function ToolTip(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ToolTip,_super),ToolTip.className="MJX_ToolTip",ToolTip.style=new StyleList_js_1.CssStyles((_a={},_a["."+ToolTip.className]={position:"absolute",display:"inline-block",height:"1px",width:"1px"},_a["."+ToolTip.className+"_Show"]={width:"auto",height:"auto",opacity:1,"text-align":"center","border-radius":"6px",padding:"0px 0px","border-bottom":"1px dotted black",position:"absolute","z-index":202},_a)),ToolTip}(StringRegion);exports.ToolTip=ToolTip;var LiveRegion=function(_super){function LiveRegion(document){var _this=_super.call(this,document)||this;return _this.document=document,_this.div.setAttribute("aria-live","assertive"),_this}return __extends(LiveRegion,_super),LiveRegion.className="MJX_LiveRegion",LiveRegion.style=new StyleList_js_1.CssStyles((_b={},_b["."+LiveRegion.className]={position:"absolute",top:"0",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},_b["."+LiveRegion.className+"_Show"]={top:"0",position:"absolute",width:"auto",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",left:0,right:0,margin:"0 auto","background-color":"rgba(0, 0, 255, 0.2)","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"},_b)),LiveRegion}(StringRegion);exports.LiveRegion=LiveRegion;var HoverRegion=function(_super){function HoverRegion(document){var _this=_super.call(this,document)||this;return _this.document=document,_this.inner.style.lineHeight="0",_this}return __extends(HoverRegion,_super),HoverRegion.prototype.position=function(node){var nodeRect=node.getBoundingClientRect(),divRect=this.div.getBoundingClientRect(),xCenter=nodeRect.left+nodeRect.width/2,left=xCenter-divRect.width/2;left=0>left?0:left,left+=window.pageXOffset;var top;switch(this.document.options.a11y.align){case"top":top=nodeRect.top-divRect.height-10;break;case"bottom":top=nodeRect.bottom+10;break;case"center":default:var yCenter=nodeRect.top+nodeRect.height/2;top=yCenter-divRect.height/2}top+=window.pageYOffset,top=0>top?0:top,this.div.style.top=top+"px",this.div.style.left=left+"px"},HoverRegion.prototype.highlight=function(highlighter){if(!this.inner.firstChild||this.inner.firstChild.hasAttribute("sre-highlight")){var color=highlighter.colorString();this.inner.style.backgroundColor=color.background,this.inner.style.color=color.foreground}},HoverRegion.prototype.Show=function(node,highlighter){this.div.style.fontSize=this.document.options.a11y.magnify,this.Update(node),_super.prototype.Show.call(this,node,highlighter)},HoverRegion.prototype.Clear=function(){this.inner.textContent="",this.inner.style.top="",this.inner.style.backgroundColor=""},HoverRegion.prototype.Update=function(node){this.Clear();var mjx=this.cloneNode(node);this.inner.appendChild(mjx)},HoverRegion.prototype.cloneNode=function(node){var mjx=node.cloneNode(!0);if("MJX-CONTAINER"!==mjx.nodeName){"g"!==mjx.nodeName&&(mjx.style.marginLeft=mjx.style.marginRight="0");for(var container=node;container&&"MJX-CONTAINER"!==container.nodeName;)container=container.parentNode;if("MJX-MATH"!==mjx.nodeName&&"svg"!==mjx.nodeName){var child=container.firstChild;if(mjx=child.cloneNode(!1).appendChild(mjx).parentNode,"svg"===mjx.nodeName){mjx.firstChild.setAttribute("transform","matrix(1 0 0 -1 0 0)");var W=parseFloat(mjx.getAttribute("viewBox").split(/ /)[2]),w=parseFloat(mjx.getAttribute("width")),_a=node.getBBox(),x=_a.x,y=_a.y,width=_a.width,height=_a.height;mjx.setAttribute("viewBox",[x,-(y+height),width,height].join(" ")),mjx.removeAttribute("style"),mjx.setAttribute("width",w/W*width+"ex"),mjx.setAttribute("height",w/W*height+"ex"),container.setAttribute("sre-highlight","false")}}mjx=container.cloneNode(!1).appendChild(mjx).parentNode,mjx.style.margin="0"}return mjx},HoverRegion.className="MJX_HoverRegion",HoverRegion.style=new StyleList_js_1.CssStyles((_c={},_c["."+HoverRegion.className]={position:"absolute",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},_c["."+HoverRegion.className+"_Show"]={position:"absolute",width:"max-content",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",margin:"0 auto","background-color":"rgba(0, 0, 255, 0.2)","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"},_c)),HoverRegion}(AbstractRegion);exports.HoverRegion=HoverRegion},function(module,exports,__webpack_require__){"use strict";function ExplorerMathItemMixin(BaseMathItem,toMathML){return function(_super){function class_1(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.explorers={},_this.attached=[],_this.restart=!1,_this.refocus=!1,_this.savedId=null,_this}return __extends(class_1,_super),class_1.prototype.explorable=function(document,force){if(void 0===force&&(force=!1),!(this.state()>=MathItem_js_1.STATE.EXPLORER)){if(!this.isEscaped&&(document.options.enableExplorer||force)){var node=this.typesetRoot,mml=toMathML(this.root);this.savedId&&(this.typesetRoot.setAttribute("sre-explorer-id",this.savedId),this.savedId=null),this.explorers=initExplorers(document,node,mml),this.attachExplorers(document)}this.state(MathItem_js_1.STATE.EXPLORER)}},class_1.prototype.attachExplorers=function(document){var e_1,_a;this.attached=[];try{for(var _b=__values(Object.keys(this.explorers)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,explorer=this.explorers[key];document.options.a11y[key]?(explorer.Attach(),this.attached.push(explorer)):explorer.Detach()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_1)throw e_1.error}}this.addExplorers(this.attached)},class_1.prototype.rerender=function(document,start){var e_2,_a;void 0===start&&(start=MathItem_js_1.STATE.RERENDER),this.savedId=this.typesetRoot.getAttribute("sre-explorer-id"),this.refocus=window.document.activeElement===this.typesetRoot;try{for(var _b=__values(this.attached),_c=_b.next();!_c.done;_c=_b.next()){var explorer=_c.value;explorer.active&&(this.restart=!0,explorer.Stop())}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_2)throw e_2.error}}_super.prototype.rerender.call(this,document,start)},class_1.prototype.updateDocument=function(document){_super.prototype.updateDocument.call(this,document),this.refocus&&this.typesetRoot.focus(),this.restart&&this.attached.forEach(function(x){return x.Start()}),this.refocus=this.restart=!1},class_1.prototype.addExplorers=function(explorers){var e_3,_a;if(!(explorers.length<=1)){var lastKeyExplorer=null;try{for(var _b=__values(this.attached),_c=_b.next();!_c.done;_c=_b.next()){var explorer=_c.value;explorer instanceof ke.AbstractKeyExplorer&&(explorer.stoppable=!1,lastKeyExplorer=explorer)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_3)throw e_3.error}}lastKeyExplorer&&(lastKeyExplorer.stoppable=!0)}},class_1}(BaseMathItem)}function ExplorerMathDocumentMixin(BaseDocument){var _a;return _a=function(_super){function class_2(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _this=_super.apply(this,__spread(args))||this,ProcessBits=_this.constructor.ProcessBits;ProcessBits.has("explorer")||ProcessBits.allocate("explorer");var visitor=new SerializedMmlVisitor_js_1.SerializedMmlVisitor(_this.mmlFactory),toMathML=function(node){return visitor.visitTree(node)};return _this.options.MathItem=ExplorerMathItemMixin(_this.options.MathItem,toMathML),_this.explorerRegions=initExplorerRegions(_this),_this}return __extends(class_2,_super),class_2.prototype.explorable=function(){var e_4,_a;if(!this.processed.isSet("explorer")){if(this.options.enableExplorer)try{for(var _b=__values(this.math),_c=_b.next();!_c.done;_c=_b.next()){var math=_c.value;math.explorable(this)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_4)throw e_4.error}}this.processed.set("explorer")}return this},class_2.prototype.state=function(state,restore){return void 0===restore&&(restore=!1),_super.prototype.state.call(this,state,restore),state<MathItem_js_1.STATE.EXPLORER&&this.processed.clear("explorer"),this},class_2}(BaseDocument),_a.OPTIONS=__assign(__assign({},BaseDocument.OPTIONS),{enrichSpeech:"shallow",enableExplorer:!0,renderActions:Options_js_1.expandable(__assign(__assign({},BaseDocument.OPTIONS.renderActions),{explorable:[MathItem_js_1.STATE.EXPLORER]})),a11y:{align:"top",backgroundColor:"Blue",backgroundOpacity:20,braille:!1,flame:!1,foregroundColor:"Black",foregroundOpacity:100,highlight:"None",hover:!1,infoPrefix:!1,infoRole:!1,infoType:!1,keyMagnifier:!1,locale:"en",magnification:"None",magnify:"400%",mouseMagnifier:!1,speech:!0,speechRules:"mathspeak-default",subtitles:!0,treeColoring:!1,viewBraille:!1}}),_a}function ExplorerHandler(handler,MmlJax){return void 0===MmlJax&&(MmlJax=null),!handler.documentClass.prototype.enrich&&MmlJax&&(handler=semantic_enrich_js_1.EnrichHandler(handler,MmlJax)),handler.documentClass=ExplorerMathDocumentMixin(handler.documentClass),handler}function initExplorerRegions(document){return{speechRegion:new Region_js_1.LiveRegion(document),brailleRegion:new Region_js_1.LiveRegion(document),magnifier:new Region_js_1.HoverRegion(document),tooltip1:new Region_js_1.ToolTip(document),tooltip2:new Region_js_1.ToolTip(document),tooltip3:new Region_js_1.ToolTip(document)}}function initExplorers(document,node,mml){var e_5,_a,explorers={};try{for(var _b=__values(Object.keys(allExplorers)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;explorers[key]=allExplorers[key](document,node,mml)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_5)throw e_5.error}}return explorers}function setA11yOptions(document,options){var e_6,_a;for(var key in options)void 0!==document.options.a11y[key]&&setA11yOption(document,key,options[key]);try{for(var _b=__values(document.math),_c=_b.next();!_c.done;_c=_b.next()){var item=_c.value;item.attachExplorers(document)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_6)throw e_6.error}}}function setA11yOption(document,option,value){switch(option){case"magnification":switch(value){case"None":document.options.a11y.magnification=value,document.options.a11y.keyMagnifier=!1,document.options.a11y.mouseMagnifier=!1;break;case"Keyboard":document.options.a11y.magnification=value,document.options.a11y.keyMagnifier=!0,document.options.a11y.mouseMagnifier=!1;break;case"Mouse":document.options.a11y.magnification=value,document.options.a11y.keyMagnifier=!1,document.options.a11y.mouseMagnifier=!0}break;case"highlight":switch(value){case"None":document.options.a11y.highlight=value,document.options.a11y.hover=!1,document.options.a11y.flame=!1;break;case"Hover":document.options.a11y.highlight=value,document.options.a11y.hover=!0,document.options.a11y.flame=!1;break;case"Flame":document.options.a11y.highlight=value,document.options.a11y.hover=!1,document.options.a11y.flame=!0}break;default:document.options.a11y[option]=value}}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;n>i;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)},__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(void 0===n||n-->0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i["return"])&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.setA11yOption=exports.setA11yOptions=exports.ExplorerHandler=exports.ExplorerMathDocumentMixin=exports.ExplorerMathItemMixin=void 0;var MathItem_js_1=__webpack_require__(8),semantic_enrich_js_1=__webpack_require__(9),Options_js_1=__webpack_require__(10),SerializedMmlVisitor_js_1=__webpack_require__(11),MJContextMenu_js_1=__webpack_require__(12),ke=__webpack_require__(5),me=__webpack_require__(6),TreeExplorer_js_1=__webpack_require__(7),Region_js_1=__webpack_require__(2);MathItem_js_1.newState("EXPLORER",160),exports.ExplorerMathItemMixin=ExplorerMathItemMixin,exports.ExplorerMathDocumentMixin=ExplorerMathDocumentMixin,exports.ExplorerHandler=ExplorerHandler;var allExplorers={speech:function(doc,node){for(var _a,rest=[],_i=2;_i<arguments.length;_i++)rest[_i-2]=arguments[_i];var explorer=(_a=ke.SpeechExplorer).create.apply(_a,__spread([doc,doc.explorerRegions.speechRegion,node],rest)),_b=__read(doc.options.a11y.speechRules.split("-"),2),domain=_b[0],style=_b[1];return explorer.speechGenerator.setOptions({locale:doc.options.a11y.locale,domain:domain,style:style,modality:"speech",cache:!1}),explorer.showRegion="subtitles",explorer},braille:function(doc,node){for(var _a,rest=[],_i=2;_i<arguments.length;_i++)rest[_i-2]=arguments[_i];var explorer=(_a=ke.SpeechExplorer).create.apply(_a,__spread([doc,doc.explorerRegions.brailleRegion,node],rest));return explorer.speechGenerator.setOptions({locale:"nemeth",domain:"default",style:"default",modality:"braille"}),explorer.showRegion="viewBraille",explorer},keyMagnifier:function(doc,node){for(var _a,rest=[],_i=2;_i<arguments.length;_i++)rest[_i-2]=arguments[_i];return(_a=ke.Magnifier).create.apply(_a,__spread([doc,doc.explorerRegions.magnifier,node],rest))},mouseMagnifier:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return me.ContentHoverer.create(doc,doc.explorerRegions.magnifier,node,function(x){return x.hasAttribute("data-semantic-type")},function(x){return x})},hover:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return me.FlameHoverer.create(doc,null,node)},infoType:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return me.ValueHoverer.create(doc,doc.explorerRegions.tooltip1,node,function(x){return x.hasAttribute("data-semantic-type")},function(x){return x.getAttribute("data-semantic-type")})},infoRole:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return me.ValueHoverer.create(doc,doc.explorerRegions.tooltip2,node,function(x){return x.hasAttribute("data-semantic-role")},function(x){return x.getAttribute("data-semantic-role")})},infoPrefix:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return me.ValueHoverer.create(doc,doc.explorerRegions.tooltip3,node,function(x){return x.hasAttribute("data-semantic-prefix")},function(x){return x.getAttribute("data-semantic-prefix")})},flame:function(doc,node){for(var _rest=[],_i=2;_i<arguments.length;_i++)_rest[_i-2]=arguments[_i];return TreeExplorer_js_1.FlameColorer.create(doc,null,node)},treeColoring:function(doc,node){for(var rest=[],_i=2;_i<arguments.length;_i++)rest[_i-2]=arguments[_i];return TreeExplorer_js_1.TreeColorer.create.apply(TreeExplorer_js_1.TreeColorer,__spread([doc,null,node],rest))}};exports.setA11yOptions=setA11yOptions,exports.setA11yOption=setA11yOption;var csPrefsSetting={},csPrefsVariables=function(menu,prefs){var e_7,_a,srVariable=menu.pool.lookup("speechRules"),_loop_1=function(pref){return csPrefsSetting[pref]?"continue":void menu.factory.get("variable")(menu.factory,{name:"csprf_"+pref,setter:function(value){csPrefsSetting[pref]=value,srVariable.setValue("clearspeak-"+sre.ClearspeakPreferences.addPreference(sre.Engine.DOMAIN_TO_STYLES.clearspeak,pref,value))},getter:function(){return csPrefsSetting[pref]||"Auto"}},menu.pool)};try{for(var prefs_1=__values(prefs),prefs_1_1=prefs_1.next();!prefs_1_1.done;prefs_1_1=prefs_1.next()){var pref=prefs_1_1.value;_loop_1(pref)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{prefs_1_1&&!prefs_1_1.done&&(_a=prefs_1["return"])&&_a.call(prefs_1)}finally{if(e_7)throw e_7.error}}},csSelectionBox=function(menu,locale){var e_8,_a,prefs=sre.ClearspeakPreferences.getLocalePreferences(),props=prefs[locale];if(!props){var csEntry=menu.findID("Accessibility","Speech","Clearspeak");return csEntry&&csEntry.disable(),null}csPrefsVariables(menu,Object.keys(props));var items=[],_loop_2=function(prop){items.push({title:prop,values:props[prop].map(function(x){return x.replace(RegExp("^"+prop+"_"),"")}),variable:"csprf_"+prop})};try{for(var _b=__values(Object.getOwnPropertyNames(props)),_c=_b.next();!_c.done;_c=_b.next()){var prop=_c.value;_loop_2(prop)}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_8)throw e_8.error}}var sb=menu.factory.get("selectionBox")(menu.factory,{title:"Clearspeak Preferences",signature:"",order:"alphabetic",grid:"square",selections:items},menu);return{type:"command",id:"ClearspeakPreferences",content:"Select Preferences",action:function(){return sb.post(0,0)}}},csMenu=function(menu,sub){var locale=menu.pool.lookup("locale").getValue(),box=csSelectionBox(menu,locale),items=sre.ClearspeakPreferences.smartPreferences(menu.mathItem,locale);return box&&items.splice(2,0,box),menu.factory.get("subMenu")(menu.factory,{items:items,id:"Clearspeak"},sub)};MJContextMenu_js_1.MJContextMenu.DynamicSubmenus.set("Clearspeak",csMenu);var iso={de:"German",en:"English",es:"Spanish",fr:"French"},language=function(menu,sub){var e_9,_a,radios=[];try{for(var _b=__values(sre.Variables.LOCALES),_c=_b.next();!_c.done;_c=_b.next()){var lang=_c.value;"nemeth"!==lang&&radios.push({type:"radio",id:lang,content:iso[lang]||lang,variable:"locale"})}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_9)throw e_9.error}}return radios.sort(function(x,y){return x.content.localeCompare(y.content,"en")}),menu.factory.get("subMenu")(menu.factory,{items:radios,id:"Language"},sub)};MJContextMenu_js_1.MJContextMenu.DynamicSubmenus.set("A11yLanguage",language)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObject=MathJax._.components.global.isObject,exports.combineConfig=MathJax._.components.global.combineConfig,exports.combineDefaults=MathJax._.components.global.combineDefaults,exports.combineWithMathJax=MathJax._.components.global.combineWithMathJax,exports.MathJax=MathJax._.components.global.MathJax},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(void 0===n||n-->0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i["return"])&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Magnifier=exports.SpeechExplorer=exports.AbstractKeyExplorer=void 0;var Explorer_js_1=__webpack_require__(1),sre_js_1=__webpack_require__(0),AbstractKeyExplorer=function(_super){function AbstractKeyExplorer(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.events=_super.prototype.Events.call(_this).concat([["keydown",_this.KeyDown.bind(_this)],["focusin",_this.FocusIn.bind(_this)],["focusout",_this.FocusOut.bind(_this)]]),_this.oldIndex=null,_this}return __extends(AbstractKeyExplorer,_super),AbstractKeyExplorer.prototype.FocusIn=function(_event){},AbstractKeyExplorer.prototype.FocusOut=function(_event){this.Stop()},AbstractKeyExplorer.prototype.Update=function(force){void 0===force&&(force=!1),(this.active||force)&&(this.highlighter.unhighlight(),this.highlighter.highlight(this.walker.getFocus(!0).getNodes()))},AbstractKeyExplorer.prototype.Attach=function(){_super.prototype.Attach.call(this),this.oldIndex=this.node.tabIndex,this.node.tabIndex=1,this.node.setAttribute("role","application")},AbstractKeyExplorer.prototype.Detach=function(){this.node.tabIndex=this.oldIndex,this.oldIndex=null,this.node.removeAttribute("role"),_super.prototype.Detach.call(this)},AbstractKeyExplorer.prototype.Stop=function(){this.active&&(this.highlighter.unhighlight(),this.walker.deactivate()),_super.prototype.Stop.call(this)},AbstractKeyExplorer}(Explorer_js_1.AbstractExplorer);exports.AbstractKeyExplorer=AbstractKeyExplorer;var SpeechExplorer=function(_super){function SpeechExplorer(document,region,node,mml){var _this=_super.call(this,document,region,node)||this;return _this.document=document,_this.region=region,_this.node=node,_this.mml=mml,_this.showRegion="subtitles",_this.init=!1,_this.restarted=!1,_this.initWalker(),_this}return __extends(SpeechExplorer,_super),SpeechExplorer.prototype.Start=function(){var _this=this,options=this.getOptions();return this.init?(_super.prototype.Start.call(this),this.speechGenerator=sre.SpeechGeneratorFactory.generator("Direct"),this.speechGenerator.setOptions(options),this.walker=sre.WalkerFactory.walker("table",this.node,this.speechGenerator,this.highlighter,this.mml),this.walker.activate(),this.Update(),this.document.options.a11y[this.showRegion]&&this.region.Show(this.node,this.highlighter),void(this.restarted=!0)):(this.init=!0,void sre_js_1.sreReady().then(function(){SRE.engineSetup().locale!==options.locale&&SRE.setupEngine({locale:options.locale}),sre_js_1.sreReady().then(function(){_this.Speech(_this.walker),_this.Start()})})["catch"](function(error){return console.log(error.message)}))},SpeechExplorer.prototype.Update=function(force){void 0===force&&(force=!1),_super.prototype.Update.call(this,force),this.region.Update(this.walker.speech());var options=this.speechGenerator.getOptions();"speech"===options.modality&&(this.document.options.a11y.speechRules=options.domain+"-"+options.style)
},SpeechExplorer.prototype.Speech=function(walker){walker.speech(),this.node.setAttribute("hasspeech","true"),this.Update(),this.restarted&&this.document.options.a11y[this.showRegion]&&this.region.Show(this.node,this.highlighter)},SpeechExplorer.prototype.KeyDown=function(event){var code=event.keyCode;return 27===code?(this.Stop(),void this.stopEvent(event)):this.active?(this.Move(code),void this.stopEvent(event)):void((32===code&&event.shiftKey||13===code)&&(this.Start(),this.stopEvent(event)))},SpeechExplorer.prototype.Move=function(key){this.walker.move(key),this.Update()},SpeechExplorer.prototype.initWalker=function(){this.speechGenerator=sre.SpeechGeneratorFactory.generator("Tree");var dummy=sre.WalkerFactory.walker("dummy",this.node,this.speechGenerator,this.highlighter,this.mml);this.walker=dummy},SpeechExplorer.prototype.getOptions=function(){var options=this.speechGenerator.getOptions(),_a=__read(this.document.options.a11y.speechRules.split("-"),2),domain=_a[0],style=_a[1];return"speech"!==options.modality||options.locale===this.document.options.a11y.locale&&options.domain===domain&&options.style===style||(options.domain=domain,options.style=style,options.locale=this.document.options.a11y.locale,this.walker.update(options)),options},SpeechExplorer}(AbstractKeyExplorer);exports.SpeechExplorer=SpeechExplorer;var Magnifier=function(_super){function Magnifier(document,region,node,mml){var _this=_super.call(this,document,region,node)||this;return _this.document=document,_this.region=region,_this.node=node,_this.mml=mml,_this.walker=sre.WalkerFactory.walker("table",_this.node,sre.SpeechGeneratorFactory.generator("Dummy"),_this.highlighter,_this.mml),_this}return __extends(Magnifier,_super),Magnifier.prototype.Update=function(force){void 0===force&&(force=!1),_super.prototype.Update.call(this,force),this.showFocus()},Magnifier.prototype.Start=function(){_super.prototype.Start.call(this),this.region.Show(this.node,this.highlighter),this.walker.activate(),this.Update()},Magnifier.prototype.showFocus=function(){var node=this.walker.getFocus().getNodes()[0];this.region.Show(node,this.highlighter)},Magnifier.prototype.Move=function(key){var result=this.walker.move(key);result&&this.Update()},Magnifier.prototype.KeyDown=function(event){var code=event.keyCode;return 27===code?(this.Stop(),void this.stopEvent(event)):this.active&&13!==code?(this.Move(code),void this.stopEvent(event)):void((32===code&&event.shiftKey||13===code)&&(this.Start(),this.stopEvent(event)))},Magnifier}(AbstractKeyExplorer);exports.Magnifier=Magnifier},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(void 0===n||n-->0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i["return"])&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlameHoverer=exports.ContentHoverer=exports.ValueHoverer=exports.Hoverer=exports.AbstractMouseExplorer=void 0;var Region_js_1=__webpack_require__(2),Explorer_js_1=__webpack_require__(1);__webpack_require__(0);var AbstractMouseExplorer=function(_super){function AbstractMouseExplorer(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.events=_super.prototype.Events.call(_this).concat([["mouseover",_this.MouseOver.bind(_this)],["mouseout",_this.MouseOut.bind(_this)]]),_this}return __extends(AbstractMouseExplorer,_super),AbstractMouseExplorer.prototype.MouseOver=function(_event){this.Start()},AbstractMouseExplorer.prototype.MouseOut=function(_event){this.Stop()},AbstractMouseExplorer}(Explorer_js_1.AbstractExplorer);exports.AbstractMouseExplorer=AbstractMouseExplorer;var Hoverer=function(_super){function Hoverer(document,region,node,nodeQuery,nodeAccess){var _this=_super.call(this,document,region,node)||this;return _this.document=document,_this.region=region,_this.node=node,_this.nodeQuery=nodeQuery,_this.nodeAccess=nodeAccess,_this}return __extends(Hoverer,_super),Hoverer.prototype.MouseOut=function(event){(event.clientX!==this.coord[0]||event.clientY!==this.coord[1])&&(this.highlighter.unhighlight(),this.region.Hide(),_super.prototype.MouseOut.call(this,event))},Hoverer.prototype.MouseOver=function(event){_super.prototype.MouseOver.call(this,event);var target=event.target;this.coord=[event.clientX,event.clientY];var _a=__read(this.getNode(target),2),node=_a[0],kind=_a[1];node&&(this.highlighter.unhighlight(),this.highlighter.highlight([node]),this.region.Update(kind),this.region.Show(node,this.highlighter))},Hoverer.prototype.getNode=function(node){for(var original=node;node&&node!==this.node;){if(this.nodeQuery(node))return[node,this.nodeAccess(node)];node=node.parentNode}for(node=original;node;){if(this.nodeQuery(node))return[node,this.nodeAccess(node)];var child=node.childNodes[0];node=child&&"defs"===child.tagName?node.childNodes[1]:child}return[null,null]},Hoverer}(AbstractMouseExplorer);exports.Hoverer=Hoverer;var ValueHoverer=function(_super){function ValueHoverer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ValueHoverer,_super),ValueHoverer}(Hoverer);exports.ValueHoverer=ValueHoverer;var ContentHoverer=function(_super){function ContentHoverer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ContentHoverer,_super),ContentHoverer}(Hoverer);exports.ContentHoverer=ContentHoverer;var FlameHoverer=function(_super){function FlameHoverer(document,_ignore,node){var _this=_super.call(this,document,new Region_js_1.DummyRegion(document),node,function(x){return _this.highlighter.isMactionNode(x)},function(){})||this;return _this.document=document,_this.node=node,_this}return __extends(FlameHoverer,_super),FlameHoverer}(Hoverer);exports.FlameHoverer=FlameHoverer},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreeColorer=exports.FlameColorer=exports.AbstractTreeExplorer=void 0;var Explorer_js_1=__webpack_require__(1);__webpack_require__(0);var AbstractTreeExplorer=function(_super){function AbstractTreeExplorer(document,region,node,mml){var _this=_super.call(this,document,null,node)||this;return _this.document=document,_this.region=region,_this.node=node,_this.mml=mml,_this.stoppable=!1,_this}return __extends(AbstractTreeExplorer,_super),AbstractTreeExplorer.prototype.Attach=function(){_super.prototype.Attach.call(this),this.Start()},AbstractTreeExplorer.prototype.Detach=function(){this.Stop(),_super.prototype.Detach.call(this)},AbstractTreeExplorer}(Explorer_js_1.AbstractExplorer);exports.AbstractTreeExplorer=AbstractTreeExplorer;var FlameColorer=function(_super){function FlameColorer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(FlameColorer,_super),FlameColorer.prototype.Start=function(){this.active||(this.active=!0,this.highlighter.highlightAll(this.node))},FlameColorer.prototype.Stop=function(){this.active&&this.highlighter.unhighlightAll(this.node),this.active=!1},FlameColorer}(AbstractTreeExplorer);exports.FlameColorer=FlameColorer;var TreeColorer=function(_super){function TreeColorer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TreeColorer,_super),TreeColorer.prototype.Start=function(){if(!this.active){this.active=!0;var generator=sre.SpeechGeneratorFactory.generator("Color");this.node.hasAttribute("hasforegroundcolor")||(generator.generateSpeech(this.node,this.mml),this.node.setAttribute("hasforegroundcolor","true")),this.highlighter.colorizeAll(this.node)}},TreeColorer.prototype.Stop=function(){this.active&&this.highlighter.uncolorizeAll(this.node),this.active=!1},TreeColorer}(AbstractTreeExplorer);exports.TreeColorer=TreeColorer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.protoItem=MathJax._.core.MathItem.protoItem,exports.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,exports.STATE=MathJax._.core.MathItem.STATE,exports.newState=MathJax._.core.MathItem.newState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EnrichedMathItemMixin=MathJax._.a11y["semantic-enrich"].EnrichedMathItemMixin,exports.EnrichedMathDocumentMixin=MathJax._.a11y["semantic-enrich"].EnrichedMathDocumentMixin,exports.EnrichHandler=MathJax._.a11y["semantic-enrich"].EnrichHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.APPEND=MathJax._.util.Options.APPEND,exports.REMOVE=MathJax._.util.Options.REMOVE,exports.Expandable=MathJax._.util.Options.Expandable,exports.expandable=MathJax._.util.Options.expandable,exports.makeArray=MathJax._.util.Options.makeArray,exports.keys=MathJax._.util.Options.keys,exports.copy=MathJax._.util.Options.copy,exports.insert=MathJax._.util.Options.insert,exports.defaultOptions=MathJax._.util.Options.defaultOptions,exports.userOptions=MathJax._.util.Options.userOptions,exports.selectOptions=MathJax._.util.Options.selectOptions,exports.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,exports.separateOptions=MathJax._.util.Options.separateOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DATAMJX=MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX,exports.toEntity=MathJax._.core.MmlTree.SerializedMmlVisitor.toEntity,exports.SerializedMmlVisitor=MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MJContextMenu=MathJax._.ui.menu.MJContextMenu.MJContextMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CssStyles=MathJax._.util.StyleList.CssStyles},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var global=__webpack_require__(4),explorer=__webpack_require__(3),Explorer=__webpack_require__(1),KeyExplorer=__webpack_require__(5),MouseExplorer=__webpack_require__(6),Region=__webpack_require__(2),TreeExplorer=__webpack_require__(7),sre=__webpack_require__(0);Object(global.combineWithMathJax)({_:{a11y:{explorer_ts:explorer,explorer:{Explorer:Explorer,KeyExplorer:KeyExplorer,MouseExplorer:MouseExplorer,Region:Region,TreeExplorer:TreeExplorer},sre:sre}}}),MathJax.startup&&MathJax.startup.extendHandler(function(handler){return Object(explorer.ExplorerHandler)(handler)})}]);
