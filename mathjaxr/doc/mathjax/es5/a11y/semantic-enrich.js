!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=9)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sreReady=void 0;var AsyncLoad_js_1=__webpack_require__(8),SRELIB="undefined"==typeof window?"./a11y/sre-node.js":"../../../speech-rule-engine/lib/sre_browser.js",srePromise="undefined"==typeof sre?AsyncLoad_js_1.asyncLoad(SRELIB):Promise.resolve(),SRE_DELAY=100,SRE_TIMEOUT=2e4;exports.sreReady=function(){return new Promise(function(resolve,reject){srePromise.then(function(){var start=(new Date).getTime(),checkSRE=function(){sre.Engine.isReady()?resolve():(new Date).getTime()-start<SRE_TIMEOUT?setTimeout(checkSRE,SRE_DELAY):reject("Timed out waiting for Speech-Rule-Engine")};checkSRE()})["catch"](function(error){return reject(error.message||error)})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObject=MathJax._.components.global.isObject,exports.combineConfig=MathJax._.components.global.combineConfig,exports.combineDefaults=MathJax._.components.global.combineDefaults,exports.combineWithMathJax=MathJax._.components.global.combineWithMathJax,exports.MathJax=MathJax._.components.global.MathJax},function(module,exports,__webpack_require__){"use strict";function EnrichedMathItemMixin(BaseMathItem,MmlJax,toMathML){return function(_super){function class_1(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(class_1,_super),class_1.prototype.serializeMml=function(node){if("outerHTML"in node)return node.outerHTML;if("undefined"!=typeof Element&&"undefined"!=typeof window&&node instanceof Element){var div=window.document.createElement("div");return div.appendChild(node),div.innerHTML}return node.toString()},class_1.prototype.enrich=function(document,force){if(void 0===force&&(force=!1),!(this.state()>=MathItem_js_1.STATE.ENRICHED)){if(!this.isEscaped&&(document.options.enableEnrichment||force)){"undefined"!=typeof sre&&sre.Engine.isReady()||mathjax_js_1.mathjax.retryAfter(sre_js_1.sreReady()),document.options.enrichSpeech!==currentSpeech&&(SRE.setupEngine({speech:document.options.enrichSpeech}),currentSpeech=document.options.enrichSpeech);var math=new document.options.MathItem("",MmlJax);math.math=this.serializeMml(SRE.toEnriched(toMathML(this.root))),math.display=this.display,math.compile(document),this.root=math.root,this.inputData.originalMml=math.math}this.state(MathItem_js_1.STATE.ENRICHED)}},class_1.prototype.attachSpeech=function(document){var e_1,_a;if(!(this.state()>=MathItem_js_1.STATE.ATTACHSPEECH)){var attributes=this.root.attributes,speech=attributes.get("aria-label")||this.getSpeech(this.root);if(speech){var adaptor=document.adaptor,node=this.typesetRoot;adaptor.setAttribute(node,"aria-label",speech);try{for(var _b=__values(adaptor.childNodes(node)),_c=_b.next();!_c.done;_c=_b.next()){var child=_c.value;adaptor.setAttribute(child,"aria-hidden","true")}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}this.state(MathItem_js_1.STATE.ATTACHSPEECH)}},class_1.prototype.getSpeech=function(node){var e_2,_a,attributes=node.attributes;if(!attributes)return"";var speech=attributes.getExplicit("data-semantic-speech");if(!attributes.getExplicit("data-semantic-parent")&&speech)return speech;try{for(var _b=__values(node.childNodes),_c=_b.next();!_c.done;_c=_b.next()){var child=_c.value,value=this.getSpeech(child);if(null!=value)return value}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return""},class_1}(BaseMathItem)}function EnrichedMathDocumentMixin(BaseDocument,MmlJax){var _a;return _a=function(_super){function class_2(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _this=_super.apply(this,__spread(args))||this;MmlJax.setMmlFactory(_this.mmlFactory);var ProcessBits=_this.constructor.ProcessBits;ProcessBits.has("enriched")||(ProcessBits.allocate("enriched"),ProcessBits.allocate("attach-speech"));var visitor=new SerializedMmlVisitor_js_1.SerializedMmlVisitor(_this.mmlFactory),toMathML=function(node){return visitor.visitTree(node)};return _this.options.MathItem=EnrichedMathItemMixin(_this.options.MathItem,MmlJax,toMathML),_this}return __extends(class_2,_super),class_2.prototype.attachSpeech=function(){var e_3,_a;if(!this.processed.isSet("attach-speech")){try{for(var _b=__values(this.math),_c=_b.next();!_c.done;_c=_b.next()){var math=_c.value;math.attachSpeech(this)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_3)throw e_3.error}}this.processed.set("attach-speech")}return this},class_2.prototype.enrich=function(){var e_4,_a;if(!this.processed.isSet("enriched")){if(this.options.enableEnrichment)try{for(var _b=__values(this.math),_c=_b.next();!_c.done;_c=_b.next()){var math=_c.value;math.enrich(this)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_c&&!_c.done&&(_a=_b["return"])&&_a.call(_b)}finally{if(e_4)throw e_4.error}}this.processed.set("enriched")}return this},class_2.prototype.state=function(state,restore){return void 0===restore&&(restore=!1),_super.prototype.state.call(this,state,restore),state<MathItem_js_1.STATE.ENRICHED&&this.processed.clear("enriched"),this},class_2}(BaseDocument),_a.OPTIONS=__assign(__assign({},BaseDocument.OPTIONS),{enableEnrichment:!0,enrichSpeech:"none",renderActions:Options_js_1.expandable(__assign(__assign({},BaseDocument.OPTIONS.renderActions),{enrich:[MathItem_js_1.STATE.ENRICHED],attachSpeech:[MathItem_js_1.STATE.ATTACHSPEECH]}))}),_a}function EnrichHandler(handler,MmlJax){return MmlJax.setAdaptor(handler.adaptor),handler.documentClass=EnrichedMathDocumentMixin(handler.documentClass,MmlJax),handler}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;n>i;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)},__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(void 0===n||n-->0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i["return"])&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EnrichHandler=exports.EnrichedMathDocumentMixin=exports.EnrichedMathItemMixin=void 0;var mathjax_js_1=__webpack_require__(4),MathItem_js_1=__webpack_require__(5),SerializedMmlVisitor_js_1=__webpack_require__(6),Options_js_1=__webpack_require__(7),sre_js_1=__webpack_require__(0),currentSpeech="none";MathItem_js_1.newState("ENRICHED",30),MathItem_js_1.newState("ATTACHSPEECH",155),exports.EnrichedMathItemMixin=EnrichedMathItemMixin,exports.EnrichedMathDocumentMixin=EnrichedMathDocumentMixin,exports.EnrichHandler=EnrichHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathML=MathJax._.input.mathml_ts.MathML},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mathjax=MathJax._.mathjax.mathjax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.protoItem=MathJax._.core.MathItem.protoItem,exports.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,exports.STATE=MathJax._.core.MathItem.STATE,exports.newState=MathJax._.core.MathItem.newState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DATAMJX=MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX,exports.toEntity=MathJax._.core.MmlTree.SerializedMmlVisitor.toEntity,exports.SerializedMmlVisitor=MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.APPEND=MathJax._.util.Options.APPEND,exports.REMOVE=MathJax._.util.Options.REMOVE,exports.Expandable=MathJax._.util.Options.Expandable,exports.expandable=MathJax._.util.Options.expandable,exports.makeArray=MathJax._.util.Options.makeArray,exports.keys=MathJax._.util.Options.keys,exports.copy=MathJax._.util.Options.copy,exports.insert=MathJax._.util.Options.insert,exports.defaultOptions=MathJax._.util.Options.defaultOptions,exports.userOptions=MathJax._.util.Options.userOptions,exports.selectOptions=MathJax._.util.Options.selectOptions,exports.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,exports.separateOptions=MathJax._.util.Options.separateOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncLoad=MathJax._.util.AsyncLoad.asyncLoad},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var global=__webpack_require__(1),semantic_enrich=__webpack_require__(2),sre=__webpack_require__(0);Object(global.combineWithMathJax)({_:{a11y:{"semantic-enrich":semantic_enrich,sre:sre}}});var mathml=__webpack_require__(3);MathJax.loader&&Object(global.combineDefaults)(MathJax.config.loader,"a11y/semantic-enrich",{checkReady:function checkReady(){return Object(sre.sreReady)()}}),MathJax.startup&&MathJax.startup.extendHandler(function(handler){return Object(semantic_enrich.EnrichHandler)(handler,new mathml.MathML)})}]);
